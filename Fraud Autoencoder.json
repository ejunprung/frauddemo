{"paragraphs":[{"text":"","user":"admin","dateUpdated":"2018-06-15T21:52:19+0000","config":{"tableHide":true,"editorSetting":{"language":"scala","editOnDblClick":true},"colWidth":12,"editorMode":"ace/mode/scala","editorHide":false,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>Imports</h3>\n"}]},"apps":[],"jobName":"paragraph_1528829101409_-1965269593","id":"20180305-005310_2014151456","dateCreated":"2018-06-12T18:45:01+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:442"},{"text":"%md\n### Imports","user":"admin","dateUpdated":"2018-06-15T21:52:19+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":false,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>Imports</h3>\n"}]},"apps":[],"jobName":"paragraph_1528829101410_-1964115346","id":"20180305-005711_1475767514","dateCreated":"2018-06-12T18:45:01+0000","dateStarted":"2018-06-15T21:52:19+0000","dateFinished":"2018-06-15T21:52:19+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:443"},{"text":"%pyspark\n\nimport numpy as np\nimport pandas as pd\nimport random\nfrom sklearn import preprocessing\nfrom keras.models import Sequential\nfrom keras.utils import np_utils\nfrom keras.layers.core import Dense, Activation, Dropout\nfrom keras.optimizers import SGD\nfrom keras.layers import Input, Dense\nfrom keras.models import Model\nimport keras.backend as K\nfrom keras.models import load_model\nimport keras\nimport csv","user":"admin","dateUpdated":"2018-06-15T21:52:19+0000","config":{"colWidth":12,"editorMode":"ace/mode/python","results":{},"enabled":true,"editorSetting":{"language":"python"},"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1528829101410_-1964115346","id":"20180305-004903_1028130266","dateCreated":"2018-06-12T18:45:01+0000","dateStarted":"2018-06-15T21:52:19+0000","dateFinished":"2018-06-15T21:52:19+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:444"},{"text":"%md\n### Data Processing\n","user":"admin","dateUpdated":"2018-06-15T21:52:19+0000","config":{"colWidth":12,"editorMode":"ace/mode/markdown","results":{},"enabled":true,"editorSetting":{"language":"markdown","editOnDblClick":true},"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>Data Processing</h3>\n"}]},"apps":[],"jobName":"paragraph_1528829101410_-1964115346","id":"20180305-005747_1334512033","dateCreated":"2018-06-12T18:45:01+0000","dateStarted":"2018-06-15T21:52:19+0000","dateFinished":"2018-06-15T21:52:19+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:445"},{"text":"%pyspark\n\n# Set seed\nrandom.seed(123)\n\n# Read in data\ndf = pd.read_csv('https://bpstore1.blob.core.windows.net/anomalydetection/fraud.csv')\n\n# Convert string data to categorical\ndf['type'] =  df['type'].astype('category')\ndf['nameOrig'] =  df['nameOrig'].astype('category')\ndf['nameDest'] =  df['nameDest'].astype('category')\ndf['step'] = df['step'].astype('float')\ndf['isFlaggedFraud'] = df['isFlaggedFraud'].astype('float')\n\ncat_columns = df.select_dtypes(['category']).columns\ndf[cat_columns] = df[cat_columns].apply(lambda x: x.cat.codes)\n\n# Convert integer type to float\ndf['type'] =  df['type'].astype('float')\ndf['nameOrig'] =  df['nameOrig'].astype('float')\ndf['nameDest'] =  df['nameDest'].astype('float')\n\n# Scale data between 0 adn 1\nx = df.values \n\nmin_max_scaler = preprocessing.MinMaxScaler()\nx_scaled = min_max_scaler.fit_transform(x)\ndf = pd.DataFrame(x_scaled, columns = [\"step\", \"type\", \"amount\", \"nameOrig\", \n    \"oldbalanceOrg\", \"newbalanceOrig\", \"nameDest\", \"oldbalanceDest\", \"newbalanceDest\", \n    \"isFraud\", \"isFlaggedFraud\"])","user":"admin","dateUpdated":"2018-06-15T21:52:19+0000","config":{"colWidth":12,"editorMode":"ace/mode/python","results":{},"enabled":true,"editorSetting":{"language":"python"},"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1528829101410_-1964115346","id":"20180305-005035_1859748507","dateCreated":"2018-06-12T18:45:01+0000","dateStarted":"2018-06-15T21:52:19+0000","dateFinished":"2018-06-15T21:52:28+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:446"},{"text":"%pyspark\n\n# Create training data\ntrain_df = df.iloc[ 1:100000,:]\ntrain_df = train_df[train_df.isFraud == 0]\n\nX_train = train_df.loc[:, ['step','type', 'amount', 'nameOrig', 'oldbalanceOrg', 'newbalanceOrig','nameDest' , 'oldbalanceDest', 'newbalanceDest', 'isFlaggedFraud']]\nX_train = np.array(X_train)\n","user":"admin","dateUpdated":"2018-06-15T21:52:19+0000","config":{"colWidth":12,"editorMode":"ace/mode/python","results":{},"enabled":true,"editorSetting":{"language":"python"},"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1528829101410_-1964115346","id":"20180305-005219_857320467","dateCreated":"2018-06-12T18:45:01+0000","dateStarted":"2018-06-15T21:52:19+0000","dateFinished":"2018-06-15T21:52:28+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:447"},{"text":"%md\n\n### Autoencoder Model","user":"admin","dateUpdated":"2018-06-15T21:52:19+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>Autoencoder Model</h3>\n"}]},"apps":[],"jobName":"paragraph_1528829101410_-1964115346","id":"20180305-005807_1320125730","dateCreated":"2018-06-12T18:45:01+0000","dateStarted":"2018-06-15T21:52:19+0000","dateFinished":"2018-06-15T21:52:19+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:448"},{"text":"%pyspark\n# Create autoencoder model\n\ninput_r = Input(shape=(10,))\nencoded = Dense(25, activation='relu')(input_r)\nh1 = Dense(12, activation='relu')(encoded)\nh2 = Dense(10, activation='relu')(h1)\nh3 = Dense(12, activation='relu')(h2)\nh4 = Dense(25, activation='relu')(h3)\ndecoded = Dense(10, activation='tanh')(h4)\n\nautoencoder = Model(input_r, decoded)\nautoencoder.compile(optimizer='adadelta', loss='mse')","user":"admin","dateUpdated":"2018-06-15T21:52:19+0000","config":{"colWidth":12,"editorMode":"ace/mode/python","results":{},"enabled":true,"editorSetting":{"language":"python"},"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1528829101410_-1964115346","id":"20180305-005058_1374542233","dateCreated":"2018-06-12T18:45:01+0000","dateStarted":"2018-06-15T21:52:28+0000","dateFinished":"2018-06-15T21:52:29+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:449"},{"text":"%pyspark\n\n# Train model\nautoencoder.fit(X_train, X_train, epochs=100, batch_size=16, validation_split=0.1, verbose=2)","user":"admin","dateUpdated":"2018-06-15T21:52:19+0000","config":{"colWidth":12,"editorMode":"ace/mode/python","results":{},"enabled":true,"editorSetting":{"language":"python"},"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Train on 89943 samples, validate on 9994 samples\nEpoch 1/100\n - 59s - loss: 0.0022 - val_loss: 3.3877e-04\nEpoch 2/100\n - 58s - loss: 3.5796e-04 - val_loss: 4.2686e-04\nEpoch 3/100\n - 59s - loss: 0.1132 - val_loss: 0.5412\nEpoch 4/100\n - 60s - loss: 0.2694 - val_loss: 0.0189\nEpoch 5/100\n - 67s - loss: 0.2186 - val_loss: 0.0209\nEpoch 6/100\n - 62s - loss: 0.1878 - val_loss: 0.1977\nEpoch 7/100\n - 58s - loss: 0.0436 - val_loss: 0.0011\nEpoch 8/100\n - 59s - loss: 0.0037 - val_loss: 7.2106e-04\nEpoch 9/100\n - 62s - loss: 0.0030 - val_loss: 0.0023\nEpoch 10/100\n - 64s - loss: 0.1021 - val_loss: 0.6841\nEpoch 11/100\n - 62s - loss: 0.4039 - val_loss: 0.5928\nEpoch 12/100\n - 65s - loss: 0.1735 - val_loss: 0.0301\nEpoch 13/100\n - 59s - loss: 0.0245 - val_loss: 0.0024\nEpoch 14/100\n - 67s - loss: 0.5651 - val_loss: 0.3466\nEpoch 15/100\n - 64s - loss: 0.5241 - val_loss: 0.3462\nEpoch 16/100\n - 60s - loss: 0.0807 - val_loss: 0.0507\nEpoch 17/100\n - 63s - loss: 0.0060 - val_loss: 0.0024\nEpoch 18/100\n - 59s - loss: 0.0074 - val_loss: 0.0037\nEpoch 19/100\n - 61s - loss: 0.1024 - val_loss: 0.4005\nEpoch 20/100\n - 60s - loss: 0.0849 - val_loss: 0.0077\nEpoch 21/100\n - 62s - loss: 0.0110 - val_loss: 0.0032\nEpoch 22/100\n - 60s - loss: 0.2453 - val_loss: 0.2913\nEpoch 23/100\n - 60s - loss: 0.3295 - val_loss: 0.3350\nEpoch 24/100\n - 61s - loss: 0.3474 - val_loss: 0.3418\nEpoch 25/100\n - 62s - loss: 0.3535 - val_loss: 0.3417\nEpoch 26/100\n - 59s - loss: 0.3482 - val_loss: 0.3420\nEpoch 27/100\n - 63s - loss: 0.3284 - val_loss: 0.3424\nEpoch 28/100\n - 61s - loss: 0.3526 - val_loss: 0.4572\nEpoch 29/100\n - 61s - loss: 0.3588 - val_loss: 0.4062\nEpoch 30/100\n - 63s - loss: 0.3356 - val_loss: 0.3420\nEpoch 31/100\n - 66s - loss: 0.3209 - val_loss: 0.3360\nEpoch 32/100\n - 63s - loss: 0.3682 - val_loss: 0.3353\nEpoch 33/100\n - 64s - loss: 0.3277 - val_loss: 0.3438\nEpoch 34/100\n - 61s - loss: 0.3616 - val_loss: 0.3358\nEpoch 35/100\n - 58s - loss: 0.3355 - val_loss: 0.3422\nEpoch 36/100\n - 62s - loss: 0.3767 - val_loss: 0.4530\nEpoch 37/100\n - 58s - loss: 0.4108 - val_loss: 0.5947\nEpoch 38/100\n - 61s - loss: 0.4105 - val_loss: 0.6029\nEpoch 39/100\n - 59s - loss: 0.4208 - val_loss: 0.5951\nEpoch 40/100\n - 59s - loss: 0.3861 - val_loss: 0.4800\nEpoch 41/100\n - 60s - loss: 0.3267 - val_loss: 0.3447\nEpoch 42/100\n - 58s - loss: 0.3468 - val_loss: 0.3448\nEpoch 43/100\n - 59s - loss: 0.3421 - val_loss: 0.3447\nEpoch 44/100\n - 60s - loss: 0.3634 - val_loss: 0.4794\nEpoch 45/100\n - 59s - loss: 0.3367 - val_loss: 0.3445\nEpoch 46/100\n - 64s - loss: 0.3478 - val_loss: 0.3448\nEpoch 47/100\n - 59s - loss: 0.3361 - val_loss: 0.3443\nEpoch 48/100\n - 60s - loss: 0.3931 - val_loss: 0.4800\nEpoch 49/100\n - 59s - loss: 0.3377 - val_loss: 0.3379\nEpoch 50/100\n - 62s - loss: 0.3911 - val_loss: 0.4526\nEpoch 51/100\n - 59s - loss: 0.3538 - val_loss: 0.4803\nEpoch 52/100\n - 58s - loss: 0.3840 - val_loss: 0.4807\nEpoch 53/100\n - 62s - loss: 0.3440 - val_loss: 0.4872\nEpoch 54/100\n - 59s - loss: 0.3623 - val_loss: 0.3377\nEpoch 55/100\n - 59s - loss: 0.4435 - val_loss: 0.4795\nEpoch 56/100\n - 63s - loss: 0.4244 - val_loss: 0.4874\nEpoch 57/100\n - 59s - loss: 0.3577 - val_loss: 0.3377\nEpoch 58/100\n - 60s - loss: 0.4531 - val_loss: 0.4805\nEpoch 59/100\n - 58s - loss: 0.3720 - val_loss: 0.4872\nEpoch 60/100\n - 59s - loss: 0.3682 - val_loss: 0.3502\nEpoch 61/100\n - 58s - loss: 0.3845 - val_loss: 0.4542\nEpoch 62/100\n - 61s - loss: 0.3396 - val_loss: 0.3447\nEpoch 63/100\n - 59s - loss: 0.4290 - val_loss: 0.3372\nEpoch 64/100\n - 61s - loss: 0.3825 - val_loss: 0.3442\nEpoch 65/100\n - 60s - loss: 0.3645 - val_loss: 0.3377\nEpoch 66/100\n - 63s - loss: 0.4127 - val_loss: 0.4869\nEpoch 67/100\n - 59s - loss: 0.3431 - val_loss: 0.3447\nEpoch 68/100\n - 64s - loss: 0.3559 - val_loss: 0.3374\nEpoch 69/100\n - 58s - loss: 0.3744 - val_loss: 0.6018\nEpoch 70/100\n - 58s - loss: 0.3699 - val_loss: 0.3371\nEpoch 71/100\n - 64s - loss: 0.3659 - val_loss: 0.3449\nEpoch 72/100\n - 62s - loss: 0.3431 - val_loss: 0.3369\nEpoch 73/100\n - 62s - loss: 0.3528 - val_loss: 0.3378\nEpoch 74/100\n - 62s - loss: 0.3591 - val_loss: 0.4598\nEpoch 75/100\n - 62s - loss: 0.3627 - val_loss: 0.3370\nEpoch 76/100\n - 59s - loss: 0.3695 - val_loss: 0.3500\nEpoch 77/100\n - 61s - loss: 0.3711 - val_loss: 0.3376\nEpoch 78/100\n - 59s - loss: 0.3504 - val_loss: 0.3416\nEpoch 79/100\n - 59s - loss: 0.3822 - val_loss: 0.3385\nEpoch 80/100\n - 61s - loss: 0.3566 - val_loss: 0.4876\nEpoch 81/100\n - 62s - loss: 0.3725 - val_loss: 0.3446\nEpoch 82/100\n - 59s - loss: 0.3546 - val_loss: 0.3370\nEpoch 83/100\n - 59s - loss: 0.3615 - val_loss: 0.3375\nEpoch 84/100\n - 60s - loss: 0.3821 - val_loss: 0.3478\nEpoch 85/100\n - 61s - loss: 0.3359 - val_loss: 0.3375\nEpoch 86/100\n - 62s - loss: 0.3450 - val_loss: 0.3370\nEpoch 87/100\n - 61s - loss: 0.3744 - val_loss: 0.3559\nEpoch 88/100\n - 62s - loss: 0.3932 - val_loss: 0.3750\nEpoch 89/100\n - 65s - loss: 0.3761 - val_loss: 0.3536\nEpoch 90/100\n - 58s - loss: 0.3701 - val_loss: 0.3451\nEpoch 91/100\n - 59s - loss: 0.3548 - val_loss: 0.3081\nEpoch 92/100\n - 61s - loss: 0.3755 - val_loss: 0.3459\nEpoch 93/100\n - 64s - loss: 0.3705 - val_loss: 0.3441\nEpoch 94/100\n - 64s - loss: 0.3786 - val_loss: 0.4608\nEpoch 95/100\n - 58s - loss: 0.3978 - val_loss: 0.3389\nEpoch 96/100\n - 59s - loss: 0.3615 - val_loss: 0.3375\nEpoch 97/100\n - 58s - loss: 0.3691 - val_loss: 0.3764\nEpoch 98/100\n - 63s - loss: 0.3441 - val_loss: 0.4824\nEpoch 99/100\n - 63s - loss: 0.3528 - val_loss: 0.3552\nEpoch 100/100\n - 61s - loss: 0.3613 - val_loss: 0.3395\n<keras.callbacks.History object at 0x7ffa127ee6d0>\n"}]},"apps":[],"jobName":"paragraph_1528829101411_-1964500095","id":"20180305-005107_2142756763","dateCreated":"2018-06-12T18:45:01+0000","dateStarted":"2018-06-15T21:52:29+0000","dateFinished":"2018-06-15T23:33:46+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:450"},{"text":"%pyspark\n","user":"admin","dateUpdated":"2018-06-15T21:52:19+0000","config":{"colWidth":12,"editorMode":"ace/mode/python","results":{},"enabled":true,"editorSetting":{"language":"python"},"editorHide":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1528829101411_-1964500095","id":"20180305-005301_986177047","dateCreated":"2018-06-12T18:45:01+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:451"}],"name":"Anomaly Detection AE","id":"2DHMUCDYY","angularObjects":{"2DF1EBRMN:existing_process":[],"2DGU2X8FJ:existing_process":[],"2DDQU2B8J:existing_process":[],"2DEKWRBQY:existing_process":[],"2DFRN27X3:existing_process":[],"2DD8376EJ:existing_process":[],"2DFG5T8VM:existing_process":[],"2DE5UCTX5:existing_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}